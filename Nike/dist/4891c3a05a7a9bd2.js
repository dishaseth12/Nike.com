import"./style.css";import*as THREE from"three";import{OrbitControls}from"three/examples/jsm/controls/OrbitControls.js";import*as dat from"lil-gui";import{GLTFLoader}from"three/examples/jsm/loaders/GLTFLoader.js";import gsap from"gsap";import{ScrollTrigger}from"gsap/ScrollTrigger";gsap.registerPlugin(ScrollTrigger);const gltfLoader=new GLTFLoader;let model,initialScale=3;function updateModelScale(){if(model){const e=Math.min(window.innerWidth/800,window.innerHeight/800),i=initialScale*e;model.scale.set(i,i,i)}}gltfLoader.load("/models/nike_tc_7900_sail/scene.gltf",(e=>{model=e.scene,console.log(e),e.scene.position.set(0,-2,0),e.scene.scale.set(initialScale,initialScale,initialScale),e.scene.rotation.set(-Math.PI/2,Math.PI/2,0),scene.add(e.scene),function(){let i=gsap.timeline({scrollTrigger:{scroller:"body",trigger:"#page1",start:"top 0%",end:"bottom -100%",markers:!0,scrub:!0,pin:!0}});i.to("#mount1",{x:-420,duration:1.5},"var"),i.to("#mount2",{x:420,duration:1.5},"var"),i.to(e.scene.position,{y:0},"var"),i.to(e.scene.rotation,{x:0,duration:1,delay:.05},"var"),i.to(e.scene.rotation,{y:5,duration:1.5,delay:.05},"var2"),i.to(e.scene.scale,{x:4,y:4,z:4,duration:1.5,delay:.05},"var2")}(),updateModelScale()}));const canvas=document.querySelector("canvas.webgl"),scene=new THREE.Scene,ambientLight=new THREE.AmbientLight(16777215,.8);scene.add(ambientLight);const directionalLight=new THREE.DirectionalLight("#ffffff",3);directionalLight.castShadow=!0,directionalLight.shadow.mapSize.set(1024,1024),directionalLight.shadow.camera.far=15,directionalLight.shadow.camera.left=-7,directionalLight.shadow.camera.top=7,directionalLight.shadow.camera.right=7,directionalLight.shadow.camera.bottom=-7,directionalLight.position.set(2,2,1),scene.add(directionalLight);const DirectionalLightHelper=new THREE.DirectionalLightHelper(directionalLight,.2),sizes={width:window.innerWidth,height:window.innerHeight};window.addEventListener("resize",(()=>{sizes.width=window.innerWidth,sizes.height=window.innerHeight,camera.aspect=sizes.width/sizes.height,camera.updateProjectionMatrix(),renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),updateModelScale()}));const cursor={x:0,y:0};window.addEventListener("mousemove",(e=>{cursor.x=e.clientX/sizes.width-.5,cursor.y=e.clientY/sizes.height-.5,console.log(cursor)}));const camera=new THREE.PerspectiveCamera(75,sizes.width/sizes.height,.1,100);camera.position.set(2,2,2),scene.add(camera);const renderer=new THREE.WebGLRenderer({canvas,alpha:!0,antialias:!0});renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap,renderer.setSize(sizes.width,sizes.height),renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),renderer.physicallyCorrectLights=!0,renderer.outputEncoding=THREE.sRGBEncoding,renderer.toneMappingExposure=3;const clock=new THREE.Clock;let previousTime=0;const tick=()=>{const e=clock.getElapsedTime();previousTime=e;let i=.25*cursor.x,t=.25*-cursor.y;camera.position.x=i,camera.position.y=t,renderer.render(scene,camera),window.requestAnimationFrame(tick)};tick();